# 调查问卷系统测试用例

## 测试概述
- **测试对象**：调查问卷系统（问卷星类似平台）
- **测试范围**：功能测试、UI测试、API测试、边界测试、安全测试、兼容性测试、性能测试
- **测试环境**：Windows 10, Chrome 浏览器，微信开发者工具
- **测试工具**：手动测试，Postman（API测试），Lighthouse（性能测试）

## 测试用例列表

### 1. 功能测试

#### 1.1 问卷创建功能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| FUNC-01 | 创建空白问卷 | 1. 访问创建问卷页面<br>2. 填写问卷标题、描述<br>3. 点击"保存草稿" | 问卷保存成功，跳转到仪表盘 | | 待执行 |
| FUNC-02 | 添加问题 | 1. 在创建页面点击"添加问题"<br>2. 填写问题内容<br>3. 设置权重 | 问题成功添加，显示在问题列表中 | | 待执行 |
| FUNC-03 | 删除问题 | 1. 添加至少2个问题<br>2. 点击某个问题的删除按钮 | 问题被删除，剩余问题重新排序 | | 待执行 |
| FUNC-04 | 问题排序 | 1. 添加多个问题<br>2. 使用上下箭头调整顺序 | 问题顺序按操作改变 | | 待执行 |
| FUNC-05 | 上传问题图片 | 1. 点击问题图片上传<br>2. 选择图片文件<br>3. 确认上传 | 图片显示在问题下方，支持预览 | | 待执行 |
| FUNC-06 | 设置截止时间 | 1. 在问卷设置中填写未来日期<br>2. 保存问卷 | 截止时间保存成功，在预览中显示 | | 待执行 |
| FUNC-07 | 发布问卷 | 1. 填写完整问卷信息<br>2. 点击"发布问卷"<br>3. 确认发布 | 问卷状态变为"已发布"，生成分享链接 | | 待执行 |
| FUNC-08 | 保存草稿 | 1. 填写部分信息<br>2. 点击"保存草稿" | 问卷保存为草稿状态，可继续编辑 | | 待执行 |

#### 1.2 问卷填写功能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| FUNC-09 | 访问问卷页面 | 1. 通过链接访问问卷页面 | 问卷内容正确加载，显示标题和问题 | | 待执行 |
| FUNC-10 | 打分题作答 | 1. 点击1-5分中的任意分数<br>2. 观察界面反馈 | 选中分数高亮显示，自动跳转到下一题 | | 待执行 |
| FUNC-11 | 多题导航 | 1. 使用问题导航按钮切换题目<br>2. 使用上一题/下一题按钮 | 正确切换题目，进度条更新 | | 待执行 |
| FUNC-12 | 答案修改 | 1. 选择某个分数<br>2. 重新选择其他分数 | 最终答案以最后一次选择为准 | | 待执行 |
| FUNC-13 | 提交验证 | 1. 未完成所有题目时点击提交<br>2. 完成所有题目后提交 | 1. 提示未完成题目<br>2. 提交成功，跳转感谢页面 | | 待执行 |
| FUNC-14 | 感谢页面 | 1. 提交成功后<br>2. 查看感谢页面内容 | 显示感谢信息，提供返回首页选项 | | 待执行 |

#### 1.3 问卷管理功能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| FUNC-15 | 查看问卷列表 | 1. 登录后进入仪表盘 | 显示用户创建的问卷列表，包含状态信息 | | 待执行 |
| FUNC-16 | 编辑草稿问卷 | 1. 点击草稿问卷的编辑按钮<br>2. 修改内容后保存 | 问卷内容更新，保持草稿状态 | | 待执行 |
| FUNC-17 | 复制问卷 | 1. 点击问卷的复制按钮<br>2. 确认复制 | 创建新的草稿问卷，内容与原问卷相同 | | 待执行 |
| FUNC-18 | 生成二维码 | 1. 在问卷管理页面点击生成二维码<br>2. 下载二维码图片 | 生成可识别的二维码，扫描后跳转问卷页面 | | 待执行 |
| FUNC-19 | 问卷状态变更 | 1. 将已发布问卷暂停<br>2. 将暂停问卷重新发布 | 状态正确变更，填写页面相应受限 | | 待执行 |

#### 1.4 数据统计功能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| FUNC-20 | 查看统计图表 | 1. 进入问卷统计页面<br>2. 查看柱状图 | 显示各问题平均分，权重计算正确 | | 待执行 |
| FUNC-21 | 实时数据更新 | 1. 在统计页面保持打开<br>2. 另一用户填写问卷 | 统计数据实时或定时更新 | | 待执行 |
| FUNC-22 | 权重计算验证 | 1. 创建不同权重的问题<br>2. 收集答案后查看综合得分 | 综合得分按权重正确计算 | | 待执行 |

#### 1.5 用户认证功能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| FUNC-23 | 用户注册 | 1. 访问注册页面<br>2. 填写注册信息<br>3. 提交注册 | 注册成功，自动登录跳转首页 | | 待执行 |
| FUNC-24 | 用户登录 | 1. 访问登录页面<br>2. 输入正确凭证<br>3. 提交登录 | 登录成功，跳转仪表盘 | | 待执行 |
| FUNC-25 | 微信登录 | 1. 在微信环境中访问<br>2. 点击微信登录按钮 | 调用微信授权，登录成功 | | 待执行 |
| FUNC-26 | 退出登录 | 1. 点击退出按钮<br>2. 确认退出 | 清除登录状态，跳转首页 | | 待执行 |

### 2. UI/UX测试

#### 2.1 界面布局
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| UI-01 | 响应式设计 | 1. 在不同屏幕尺寸（手机、平板、桌面）访问<br>2. 调整浏览器窗口大小 | 界面自适应，无布局错乱，可正常操作 | | 待执行 |
| UI-02 | 微信适配 | 1. 在微信浏览器中打开问卷页面<br>2. 测试所有交互功能 | 界面样式正常，无微信兼容性问题 | | 待执行 |
| UI-03 | 颜色对比度 | 1. 检查主要文本与背景对比度<br>2. 检查按钮可识别性 | 符合WCAG AA标准，易于阅读 | | 待执行 |
| UI-04 | 字体和图标 | 1. 检查各页面字体一致性<br>2. 验证图标正确显示 | 字体清晰，图标无错位或缺失 | | 待执行 |

#### 2.2 用户体验
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| UX-01 | 页面加载速度 | 1. 打开各主要页面<br>2. 记录加载时间 | 页面加载时间<2秒，符合性能需求 | | 待执行 |
| UX-02 | 操作反馈 | 1. 点击按钮、链接等交互元素<br>2. 提交表单 | 有明确的视觉反馈（hover、loading状态） | | 待执行 |
| UX-03 | 错误提示 | 1. 触发各种错误场景（如空提交）<br>2. 观察提示信息 | 错误提示清晰明确，指导用户修正 | | 待执行 |
| UX-04 | 导航逻辑 | 1. 测试页面间跳转<br>2. 使用浏览器前进后退 | 导航逻辑合理，无死循环或丢失状态 | | 待执行 |

### 3. API测试

#### 3.1 接口可用性
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| API-01 | 获取问卷列表 | 1. 发送GET请求到问卷列表接口 | 返回正确的问卷数据，HTTP 200 | | 待执行 |
| API-02 | 创建问卷 | 1. 发送POST请求创建问卷<br>2. 包含必要参数 | 创建成功，返回问卷ID，HTTP 201 | | 待执行 |
| API-03 | 获取单个问卷 | 1. 发送GET请求到问卷详情接口<br>2. 传入有效问卷ID | 返回问卷完整信息，HTTP 200 | | 待执行 |
| API-04 | 提交答案 | 1. 发送POST请求提交答案<br>2. 包含所有问题答案 | 提交成功，HTTP 200 | | 待执行 |
| API-05 | 获取统计数据 | 1. 发送GET请求到统计接口<br>2. 传入问卷ID | 返回统计计算结果，HTTP 200 | | 待执行 |

#### 3.2 错误处理
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| API-06 | 无效问卷ID | 1. 使用不存在的问卷ID请求详情 | 返回404错误，明确错误信息 | | 待执行 |
| API-07 | 未授权访问 | 1. 未登录状态下访问需授权接口 | 返回401错误，提示未授权 | | 待执行 |
| API-08 | 参数验证 | 1. 发送缺少必需参数的请求<br>2. 发送格式错误的参数 | 返回422错误，列出验证错误详情 | | 待执行 |
| API-09 | 重复提交 | 1. 同一用户对同一问题重复提交答案 | 根据业务规则处理（拒绝或覆盖） | | 待执行 |

### 4. 边界条件测试

#### 4.1 输入边界
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| BOUND-01 | 问卷标题长度 | 1. 输入极短标题（1字符）<br>2. 输入极长标题（200字符） | 1. 验证通过<br>2. 验证通过或被合理截断 | | 待执行 |
| BOUND-02 | 问题数量 | 1. 创建只有1个问题的问卷<br>2. 创建大量问题（如50个） | 系统正常处理，界面可操作 | | 待执行 |
| BOUND-03 | 权重范围 | 1. 设置权重为最小值0.1<br>2. 设置权重为最大值5.0 | 滑动条和输入正常，保存成功 | | 待执行 |
| BOUND-04 | 图片大小 | 1. 上传超过5MB的图片<br>2. 上传非图片文件 | 1. 提示文件过大<br>2. 提示文件类型错误 | | 待执行 |
| BOUND-05 | 截止时间 | 1. 设置过去时间作为截止时间<br>2. 设置很久未来的时间 | 1. 可能提示无效<br>2. 正常接受 | | 待执行 |

#### 4.2 业务边界
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| BOUND-06 | 问卷过期 | 1. 访问已过截止时间的问卷 | 提示问卷已结束，不可填写 | | 待执行 |
| BOUND-07 | 暂停问卷 | 1. 访问已暂停的问卷 | 提示问卷已暂停，不可填写 | | 待执行 |
| BOUND-08 | 大量并发填写 | 1. 模拟多用户同时填写问卷 | 系统稳定，数据一致 | | 待执行 |
| BOUND-09 | 匿名用户标识 | 1. 同一设备多次填写问卷<br>2. 不同设备填写问卷 | 匿名标识生成合理，防刷机制有效 | | 待执行 |

### 5. 安全性测试

#### 5.1 注入防护
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| SEC-01 | XSS攻击 | 1. 在输入字段中输入脚本标签<br>2. 提交后查看页面 | 脚本被转义或过滤，不执行 | | 待执行 |
| SEC-02 | SQL注入 | 1. 在API参数中输入SQL注入语句 | 数据库不受影响，返回错误或空结果 | | 待执行 |
| SEC-03 | 文件上传漏洞 | 1. 上传包含恶意代码的文件<br>2. 尝试上传可执行文件 | 文件类型检查阻止上传 | | 待执行 |

#### 5.2 权限控制
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| SEC-04 | 越权访问 | 1. 用户A尝试访问用户B的问卷数据<br>2. 未登录用户尝试访问管理页面 | 返回403错误，拒绝访问 | | 待执行 |
| SEC-05 | 数据泄露 | 1. 检查API响应是否包含敏感信息<br>2. 检查前端代码是否暴露密钥 | 不泄露敏感数据，密钥安全 | | 待执行 |
| SEC-06 | 会话安全 | 1. 检查token存储和传输安全性<br>2. 测试会话超时机制 | Token安全，会话超时正常 | | 待执行 |

#### 5.3 业务安全
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| SEC-07 | 防刷机制 | 1. 同一用户短时间内多次提交<br>2. 使用脚本自动化提交 | 限制提交频率，验证码机制 | | 待执行 |
| SEC-08 | 微信安全 | 1. 测试微信授权流程安全性<br>2. 验证微信回调参数 | 防止CSRF，参数签名验证 | | 待执行 |

### 6. 兼容性测试

#### 6.1 浏览器兼容
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| COMP-01 | Chrome浏览器 | 1. 在Chrome中测试所有功能 | 功能正常，样式正确 | | 待执行 |
| COMP-02 | Firefox浏览器 | 1. 在Firefox中测试所有功能 | 功能正常，样式正确 | | 待执行 |
| COMP-03 | Safari浏览器 | 1. 在Safari中测试所有功能 | 功能正常，样式正确 | | 待执行 |
| COMP-04 | Edge浏览器 | 1. 在Edge中测试所有功能 | 功能正常，样式正确 | | 待执行 |

#### 6.2 移动端兼容
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| COMP-05 | iOS微信浏览器 | 1. 在iOS微信中测试问卷填写<br>2. 测试分享功能 | 功能正常，无显示问题 | | 待执行 |
| COMP-06 | Android微信浏览器 | 1. 在Android微信中测试问卷填写<br>2. 测试二维码识别 | 功能正常，无显示问题 | | 待执行 |
| COMP-07 | 移动端浏览器 | 1. 在手机Chrome/Safari测试 | 功能正常，触摸交互流畅 | | 待执行 |

#### 6.3 操作系统兼容
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| COMP-08 | Windows系统 | 1. 在Windows上测试 | 功能正常 | | 待执行 |
| COMP-09 | macOS系统 | 1. 在macOS上测试 | 功能正常 | | 待执行 |
| COMP-10 | iOS系统 | 1. 在iOS设备上测试 | 功能正常 | | 待执行 |
| COMP-11 | Android系统 | 1. 在Android设备上测试 | 功能正常 | | 待执行 |

### 7. 性能测试

#### 7.1 前端性能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| PERF-01 | 页面加载性能 | 1. 使用Lighthouse测试页面性能得分<br>2. 检查首次内容绘制时间 | 性能得分>80，FCP<1.5秒 | | 待执行 |
| PERF-02 | 资源加载优化 | 1. 检查图片懒加载<br>2. 检查代码分割 | 资源按需加载，无阻塞 | | 待执行 |
| PERF-03 | 内存使用 | 1. 长时间操作后检查内存泄漏 | 内存使用稳定，无持续增长 | | 待执行 |

#### 7.2 后端性能
| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|----------|------|
| PERF-04 | API响应时间 | 1. 测试关键API接口响应时间 | 平均响应时间<200ms | | 待执行 |
| PERF-05 | 并发处理能力 | 1. 模拟100个用户同时填写问卷 | 系统稳定，响应时间可接受 | | 待执行 |
| PERF-06 | 数据库查询性能 | 1. 测试统计查询性能<br>2. 测试大数据量分页 | 查询时间合理，无超时 | | 待执行 |

## 测试执行计划
1. **第一阶段**：功能测试和UI测试（优先级高）
2. **第二阶段**：边界条件测试和API测试
3. **第三阶段**：安全性测试和兼容性测试
4. **第四阶段**：性能测试和压力测试

## 测试环境准备
- 本地开发环境：http://localhost:3000
- 测试数据库：独立测试数据库
- 测试用户账号：test@example.com / password123
- 微信测试环境：微信开发者工具模拟

## 风险与依赖
1. API尚未完全实现，部分测试需等待后端完成
2. 微信登录功能需要微信开放平台配置
3. 性能测试需要生产环境或模拟生产环境数据

---
*测试用例编写完成，共63个测试用例，涵盖7个测试类别。*